.kun-prose {
  @apply text-default-800 leading-7 text-inherit;
}

/* Paragraphs */
.kun-prose p {
  @apply py-1;
  overflow-wrap: break-word;
}

/* Links */
.kun-prose a {
  @apply text-primary-500 decoration-primary-200 hover:text-primary-600 hover:decoration-primary-400 font-medium break-all underline underline-offset-2 transition-colors duration-200;
}

.kun-prose .anchor {
  @apply text-default-800 hover:text-primary-500 no-underline;
}

/* Headings with improved spacing and refined typography */
.kun-prose h1 {
  @apply text-default-900 mt-0 mb-8 scroll-m-20 text-4xl leading-tight font-extrabold tracking-tight;
}

.kun-prose h2 {
  @apply text-default-900 border-default-200 mt-8 mb-4 scroll-m-20 border-t pt-4 text-2xl leading-tight font-bold tracking-tight;
}

.kun-prose h3 {
  @apply text-default-900 mt-6 mb-3 scroll-m-20 pt-3 text-xl leading-snug font-semibold tracking-tight;
}

.kun-prose h4 {
  @apply text-default-900 my-3 scroll-m-20 text-lg leading-snug font-semibold tracking-tight;
}

.kun-prose h5 {
  @apply text-default-800 my-3 text-base leading-snug font-medium tracking-tight;
}

.kun-prose h6 {
  @apply text-default-800 my-3 text-sm leading-snug font-medium tracking-tight;
}

/* Lists with improved spacing and bullets */
.kun-prose ul {
  @apply marker:text-default-400 my-6 list-outside list-disc space-y-3 pl-8 text-inherit;
}

.kun-prose ol {
  @apply marker:text-default-400 my-6 list-outside list-decimal space-y-3 pl-8 text-inherit;
}

.kun-prose li {
  @apply mt-2 leading-relaxed text-inherit;
}

/* Nested lists */
.kun-prose li > ul,
.kun-prose li > ol {
  @apply my-2 space-y-2;
}

/* Quotes with refined styling */
.kun-prose blockquote {
  @apply border-primary-200 bg-primary-50/50 text-default-800 my-8 rounded-r-lg border-l-4 py-1 pr-4 pl-6 font-medium shadow-sm;
}

/* Tables with NextUI-inspired design */
.kun-prose table {
  @apply border-default-200 bg-content1 my-8 w-full overflow-hidden rounded-lg border shadow-sm;
}

.kun-prose thead {
  @apply bg-default-50;
}

.kun-prose th {
  @apply border-default-200 text-default-700 border-b px-4 py-3 text-left text-sm font-semibold tracking-wide uppercase;
}

.kun-prose td {
  @apply border-default-200 text-default-600 border-b px-4 py-3;
}

.kun-prose tr:last-child td {
  @apply border-b-0;
}

.kun-prose tr:hover {
  @apply bg-default-50/50 transition-colors duration-200;
}

/* Additional refinements */
.kun-prose hr {
  @apply border-default-200 my-12;
}

.kun-prose img {
  @apply border-default-200 my-8 cursor-pointer rounded-lg border shadow-md;
}

.kun-prose img[alt='Sticker'] {
  @apply m-2 inline w-32;
}

.kun-prose figure {
  @apply my-8;
}

.kun-prose figcaption {
  @apply text-default-500 mt-3 text-center text-sm;
}

/* Definition lists */
.kun-prose dt {
  @apply text-default-900 mt-4 font-semibold;
}

.kun-prose dd {
  @apply border-default-200 mt-2 border-l-2 pl-4;
}

/* Keyboard shortcuts */
.kun-prose kbd {
  @apply bg-default-100 border-default-300 text-default-700 rounded border px-2 py-1 font-mono text-sm shadow-sm;
}

/* Mark text */
.kun-prose mark {
  @apply bg-warning-100 text-warning-800 rounded px-1;
}

.kun-prose-normal {
  @apply leading-7 whitespace-normal;
}

.kun-prose-normal p {
  @apply my-4;
}

/* Markdown processor plugins */
.kun-prose .kun-code-container {
  @apply border-default-200 relative my-6 overflow-x-auto rounded-xl border shadow-sm;
}

.kun-prose .kun-code-container pre {
  @apply overflow-x-auto p-4;
}

.kun-prose .kun-code-container pre code {
  @apply block w-fit;
}

.kun-prose .kun-code-header {
  @apply text-default-500 border-default-200 bg-secondary-50/50 flex items-center justify-between border-b px-4 py-2 text-xs;
}

.kun-prose .lang {
  @apply font-mono font-semibold tracking-wider uppercase;
}

.kun-prose .copy {
  @apply text-default-500 hover:bg-secondary-200 flex h-7 w-7 cursor-pointer items-center justify-center rounded-md border-none bg-transparent transition-colors duration-200;
}

.kun-prose .copy::before {
  content: '';
  display: block;
  width: 16px;
  height: 16px;
  background-color: currentColor;
  -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect width='14' height='14' x='8' y='8' rx='2' ry='2'/%3E%3Cpath d='M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2'/%3E%3C/svg%3E")
    no-repeat center / contain;
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect width='14' height='14' x='8' y='8' rx='2' ry='2'/%3E%3Cpath d='M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2'/%3E%3C/svg%3E")
    no-repeat center / contain;
}

.kun-prose .copy.copied::before {
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 6 9 17l-5-5'/%3E%3C/svg%3E");
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 6 9 17l-5-5'/%3E%3C/svg%3E");
}

.kun-prose .code-highlight {
  @apply float-left min-w-full;
}

.kun-prose .code-line {
  @apply -mx-4 block border-l-4 border-transparent px-4;
}

.kun-prose .code-line.inserted {
  @apply bg-success-500/10;
}

.kun-prose .code-line.deleted {
  @apply bg-danger-500/10;
}

.kun-prose .highlight-line {
  @apply border-primary-500 bg-primary-500/10 -mx-4 border-l-4;
}

.kun-prose .line-number::before {
  content: attr(line);
  @apply mr-4 -ml-2 inline-block w-4 text-right text-gray-400;
}
